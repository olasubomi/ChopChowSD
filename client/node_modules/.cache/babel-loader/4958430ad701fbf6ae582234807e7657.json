{"ast":null,"code":"import { __awaiter, __generator, __values } from \"tslib\";\nimport { isArrayBuffer } from \"@aws-sdk/is-array-buffer\";\nimport { toHex } from \"@aws-sdk/util-hex-encoding\";\nimport { SHA256_HEADER, UNSIGNED_PAYLOAD } from \"./constants\";\nexport var getPayloadHash = function getPayloadHash(_a, hashConstructor) {\n  var headers = _a.headers,\n      body = _a.body;\n  return __awaiter(void 0, void 0, void 0, function () {\n    var _b, _c, headerName, hashCtor, _d;\n\n    var e_1, _e;\n\n    return __generator(this, function (_f) {\n      switch (_f.label) {\n        case 0:\n          try {\n            for (_b = __values(Object.keys(headers)), _c = _b.next(); !_c.done; _c = _b.next()) {\n              headerName = _c.value;\n\n              if (headerName.toLowerCase() === SHA256_HEADER) {\n                return [2, headers[headerName]];\n              }\n            }\n          } catch (e_1_1) {\n            e_1 = {\n              error: e_1_1\n            };\n          } finally {\n            try {\n              if (_c && !_c.done && (_e = _b.return)) _e.call(_b);\n            } finally {\n              if (e_1) throw e_1.error;\n            }\n          }\n\n          if (!(body == undefined)) return [3, 1];\n          return [2, \"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855\"];\n\n        case 1:\n          if (!(typeof body === \"string\" || ArrayBuffer.isView(body) || isArrayBuffer(body))) return [3, 3];\n          hashCtor = new hashConstructor();\n          hashCtor.update(body);\n          _d = toHex;\n          return [4, hashCtor.digest()];\n\n        case 2:\n          return [2, _d.apply(void 0, [_f.sent()])];\n\n        case 3:\n          return [2, UNSIGNED_PAYLOAD];\n      }\n    });\n  });\n};","map":{"version":3,"sources":["/home/chuka/joe/ChopChowSD/node_modules/@aws-sdk/signature-v4/dist-es/getPayloadHash.js"],"names":["__awaiter","__generator","__values","isArrayBuffer","toHex","SHA256_HEADER","UNSIGNED_PAYLOAD","getPayloadHash","_a","hashConstructor","headers","body","_b","_c","headerName","hashCtor","_d","e_1","_e","_f","label","Object","keys","next","done","value","toLowerCase","e_1_1","error","return","call","undefined","ArrayBuffer","isView","update","digest","apply","sent"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,WAApB,EAAiCC,QAAjC,QAAiD,OAAjD;AACA,SAASC,aAAT,QAA8B,0BAA9B;AACA,SAASC,KAAT,QAAsB,4BAAtB;AACA,SAASC,aAAT,EAAwBC,gBAAxB,QAAgD,aAAhD;AACA,OAAO,IAAIC,cAAc,GAAG,SAAjBA,cAAiB,CAAUC,EAAV,EAAcC,eAAd,EAA+B;AACvD,MAAIC,OAAO,GAAGF,EAAE,CAACE,OAAjB;AAAA,MAA0BC,IAAI,GAAGH,EAAE,CAACG,IAApC;AACA,SAAOX,SAAS,CAAC,KAAK,CAAN,EAAS,KAAK,CAAd,EAAiB,KAAK,CAAtB,EAAyB,YAAY;AACjD,QAAIY,EAAJ,EAAQC,EAAR,EAAYC,UAAZ,EAAwBC,QAAxB,EAAkCC,EAAlC;;AACA,QAAIC,GAAJ,EAASC,EAAT;;AACA,WAAOjB,WAAW,CAAC,IAAD,EAAO,UAAUkB,EAAV,EAAc;AACnC,cAAQA,EAAE,CAACC,KAAX;AACI,aAAK,CAAL;AACI,cAAI;AACA,iBAAKR,EAAE,GAAGV,QAAQ,CAACmB,MAAM,CAACC,IAAP,CAAYZ,OAAZ,CAAD,CAAb,EAAqCG,EAAE,GAAGD,EAAE,CAACW,IAAH,EAA/C,EAA0D,CAACV,EAAE,CAACW,IAA9D,EAAoEX,EAAE,GAAGD,EAAE,CAACW,IAAH,EAAzE,EAAoF;AAChFT,cAAAA,UAAU,GAAGD,EAAE,CAACY,KAAhB;;AACA,kBAAIX,UAAU,CAACY,WAAX,OAA6BrB,aAAjC,EAAgD;AAC5C,uBAAO,CAAC,CAAD,EAAIK,OAAO,CAACI,UAAD,CAAX,CAAP;AACH;AACJ;AACJ,WAPD,CAQA,OAAOa,KAAP,EAAc;AAAEV,YAAAA,GAAG,GAAG;AAAEW,cAAAA,KAAK,EAAED;AAAT,aAAN;AAAyB,WARzC,SASQ;AACJ,gBAAI;AACA,kBAAId,EAAE,IAAI,CAACA,EAAE,CAACW,IAAV,KAAmBN,EAAE,GAAGN,EAAE,CAACiB,MAA3B,CAAJ,EAAwCX,EAAE,CAACY,IAAH,CAAQlB,EAAR;AAC3C,aAFD,SAGQ;AAAE,kBAAIK,GAAJ,EAAS,MAAMA,GAAG,CAACW,KAAV;AAAkB;AACxC;;AACD,cAAI,EAAEjB,IAAI,IAAIoB,SAAV,CAAJ,EAA0B,OAAO,CAAC,CAAD,EAAI,CAAJ,CAAP;AAC1B,iBAAO,CAAC,CAAD,EAAI,kEAAJ,CAAP;;AACJ,aAAK,CAAL;AACI,cAAI,EAAE,OAAOpB,IAAP,KAAgB,QAAhB,IAA4BqB,WAAW,CAACC,MAAZ,CAAmBtB,IAAnB,CAA5B,IAAwDR,aAAa,CAACQ,IAAD,CAAvE,CAAJ,EAAoF,OAAO,CAAC,CAAD,EAAI,CAAJ,CAAP;AACpFI,UAAAA,QAAQ,GAAG,IAAIN,eAAJ,EAAX;AACAM,UAAAA,QAAQ,CAACmB,MAAT,CAAgBvB,IAAhB;AACAK,UAAAA,EAAE,GAAGZ,KAAL;AACA,iBAAO,CAAC,CAAD,EAAIW,QAAQ,CAACoB,MAAT,EAAJ,CAAP;;AACJ,aAAK,CAAL;AAAQ,iBAAO,CAAC,CAAD,EAAInB,EAAE,CAACoB,KAAH,CAAS,KAAK,CAAd,EAAiB,CAACjB,EAAE,CAACkB,IAAH,EAAD,CAAjB,CAAJ,CAAP;;AACR,aAAK,CAAL;AAAQ,iBAAO,CAAC,CAAD,EAAI/B,gBAAJ,CAAP;AA1BZ;AA4BH,KA7BiB,CAAlB;AA8BH,GAjCe,CAAhB;AAkCH,CApCM","sourcesContent":["import { __awaiter, __generator, __values } from \"tslib\";\nimport { isArrayBuffer } from \"@aws-sdk/is-array-buffer\";\nimport { toHex } from \"@aws-sdk/util-hex-encoding\";\nimport { SHA256_HEADER, UNSIGNED_PAYLOAD } from \"./constants\";\nexport var getPayloadHash = function (_a, hashConstructor) {\n    var headers = _a.headers, body = _a.body;\n    return __awaiter(void 0, void 0, void 0, function () {\n        var _b, _c, headerName, hashCtor, _d;\n        var e_1, _e;\n        return __generator(this, function (_f) {\n            switch (_f.label) {\n                case 0:\n                    try {\n                        for (_b = __values(Object.keys(headers)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                            headerName = _c.value;\n                            if (headerName.toLowerCase() === SHA256_HEADER) {\n                                return [2, headers[headerName]];\n                            }\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (_c && !_c.done && (_e = _b.return)) _e.call(_b);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                    if (!(body == undefined)) return [3, 1];\n                    return [2, \"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855\"];\n                case 1:\n                    if (!(typeof body === \"string\" || ArrayBuffer.isView(body) || isArrayBuffer(body))) return [3, 3];\n                    hashCtor = new hashConstructor();\n                    hashCtor.update(body);\n                    _d = toHex;\n                    return [4, hashCtor.digest()];\n                case 2: return [2, _d.apply(void 0, [_f.sent()])];\n                case 3: return [2, UNSIGNED_PAYLOAD];\n            }\n        });\n    });\n};\n"]},"metadata":{},"sourceType":"module"}