{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _cssClasses = require('../cssClasses');\n\nvar _cssClasses2 = _interopRequireDefault(_cssClasses);\n\nvar _CSSTranslate = require('../CSSTranslate');\n\nvar _CSSTranslate2 = _interopRequireDefault(_CSSTranslate);\n\nvar _reactEasySwipe = require('react-easy-swipe');\n\nvar _reactEasySwipe2 = _interopRequireDefault(_reactEasySwipe);\n\nvar _Thumbs = require('./Thumbs');\n\nvar _Thumbs2 = _interopRequireDefault(_Thumbs);\n\nvar _customPropTypes = require('../customPropTypes');\n\nvar customPropTypes = _interopRequireWildcard(_customPropTypes);\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar noop = function noop() {};\n\nvar defaultStatusFormatter = function defaultStatusFormatter(current, total) {\n  return current + ' of ' + total;\n};\n\nvar Carousel = function (_Component) {\n  _inherits(Carousel, _Component);\n\n  function Carousel(props) {\n    _classCallCheck(this, Carousel);\n\n    var _this = _possibleConstructorReturn(this, (Carousel.__proto__ || Object.getPrototypeOf(Carousel)).call(this, props));\n\n    _initialiseProps.call(_this);\n\n    _this.state = {\n      initialized: false,\n      selectedItem: props.selectedItem,\n      hasMount: false,\n      isMouseEntered: false,\n      autoPlay: props.autoPlay\n    };\n    return _this;\n  }\n\n  _createClass(Carousel, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      if (!this.props.children) {\n        return;\n      }\n\n      this.setupCarousel();\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      var _this2 = this;\n\n      if (nextProps.selectedItem !== this.state.selectedItem) {\n        this.updateSizes();\n        this.moveTo(nextProps.selectedItem);\n      }\n\n      if (nextProps.autoPlay !== this.state.autoPlay) {\n        this.setState({\n          autoPlay: nextProps.autoPlay\n        }, function () {\n          if (_this2.state.autoPlay) {\n            _this2.setupAutoPlay();\n          } else {\n            _this2.destroyAutoPlay();\n          }\n        });\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (!prevProps.children && this.props.children && !this.state.initialized) {\n        this.setupCarousel();\n      }\n\n      if (prevState.swiping && !this.state.swiping) {\n        // We stopped swiping, ensure we are heading to the new/current slide and not stuck\n        this.resetPosition();\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.destroyCarousel();\n    }\n  }, {\n    key: 'setupCarousel',\n    value: function setupCarousel() {\n      this.bindEvents();\n\n      if (this.state.autoPlay && _react.Children.count(this.props.children) > 1) {\n        this.setupAutoPlay();\n      }\n\n      this.setState({\n        initialized: true\n      });\n      var initialImage = this.getInitialImage();\n\n      if (initialImage) {\n        // if it's a carousel of images, we set the mount state after the first image is loaded\n        initialImage.addEventListener('load', this.setMountState);\n      } else {\n        this.setMountState();\n      }\n    }\n  }, {\n    key: 'destroyCarousel',\n    value: function destroyCarousel() {\n      if (this.state.initialized) {\n        this.unbindEvents();\n        this.destroyAutoPlay();\n      }\n    }\n  }, {\n    key: 'setupAutoPlay',\n    value: function setupAutoPlay() {\n      this.autoPlay();\n      var carouselWrapper = this.carouselWrapperRef;\n\n      if (this.props.stopOnHover && carouselWrapper) {\n        carouselWrapper.addEventListener('mouseenter', this.stopOnHover);\n        carouselWrapper.addEventListener('mouseleave', this.startOnLeave);\n      }\n    }\n  }, {\n    key: 'destroyAutoPlay',\n    value: function destroyAutoPlay() {\n      this.clearAutoPlay();\n      var carouselWrapper = this.carouselWrapperRef;\n\n      if (this.props.stopOnHover && carouselWrapper) {\n        carouselWrapper.removeEventListener('mouseenter', this.stopOnHover);\n        carouselWrapper.removeEventListener('mouseleave', this.startOnLeave);\n      }\n    }\n  }, {\n    key: 'bindEvents',\n    value: function bindEvents() {\n      // as the widths are calculated, we need to resize\n      // the carousel when the window is resized\n      window.addEventListener(\"resize\", this.updateSizes); // issue #2 - image loading smaller\n\n      window.addEventListener(\"DOMContentLoaded\", this.updateSizes);\n\n      if (this.props.useKeyboardArrows) {\n        document.addEventListener(\"keydown\", this.navigateWithKeyboard);\n      }\n    }\n  }, {\n    key: 'unbindEvents',\n    value: function unbindEvents() {\n      // removing listeners\n      window.removeEventListener(\"resize\", this.updateSizes);\n      window.removeEventListener(\"DOMContentLoaded\", this.updateSizes);\n      var initialImage = this.getInitialImage();\n\n      if (initialImage) {\n        initialImage.removeEventListener(\"load\", this.setMountState);\n      }\n\n      if (this.props.useKeyboardArrows) {\n        document.removeEventListener(\"keydown\", this.navigateWithKeyboard);\n      }\n    }\n  }, {\n    key: 'getPosition',\n    value: function getPosition(index) {\n      if (this.props.infiniteLoop) {\n        // index has to be added by 1 because of the first cloned slide\n        ++index;\n      }\n\n      var childrenLength = _react.Children.count(this.props.children);\n\n      if (this.props.centerMode && this.props.axis === 'horizontal') {\n        var currentPosition = -index * this.props.centerSlidePercentage;\n        var lastPosition = childrenLength - 1;\n\n        if (index && (index !== lastPosition || this.props.infiniteLoop)) {\n          currentPosition += (100 - this.props.centerSlidePercentage) / 2;\n        } else if (index === lastPosition) {\n          currentPosition += 100 - this.props.centerSlidePercentage;\n        }\n\n        return currentPosition;\n      }\n\n      return -index * 100;\n    }\n  }, {\n    key: 'renderItems',\n    value: function renderItems(isClone) {\n      var _this3 = this;\n\n      return _react.Children.map(this.props.children, function (item, index) {\n        var slideProps = {\n          ref: function ref(e) {\n            return _this3.setItemsRef(e, index);\n          },\n          key: 'itemKey' + index + (isClone ? 'clone' : ''),\n          className: _cssClasses2.default.ITEM(true, index === _this3.state.selectedItem),\n          onClick: _this3.handleClickItem.bind(_this3, index, item)\n        };\n\n        if (_this3.props.centerMode && _this3.props.axis === 'horizontal') {\n          slideProps.style = {\n            minWidth: _this3.props.centerSlidePercentage + '%'\n          };\n        }\n\n        return _react2.default.createElement('li', slideProps, item);\n      });\n    }\n  }, {\n    key: 'renderControls',\n    value: function renderControls() {\n      var _this4 = this;\n\n      if (!this.props.showIndicators) {\n        return null;\n      }\n\n      return _react2.default.createElement('ul', {\n        className: 'control-dots'\n      }, _react.Children.map(this.props.children, function (item, index) {\n        return _react2.default.createElement('li', {\n          className: _cssClasses2.default.DOT(index === _this4.state.selectedItem),\n          onClick: _this4.changeItem,\n          onKeyDown: _this4.changeItem,\n          value: index,\n          key: index,\n          role: 'button',\n          tabIndex: 0\n        });\n      }));\n    }\n  }, {\n    key: 'renderStatus',\n    value: function renderStatus() {\n      if (!this.props.showStatus) {\n        return null;\n      }\n\n      return _react2.default.createElement('p', {\n        className: 'carousel-status'\n      }, this.props.statusFormatter(this.state.selectedItem + 1, _react.Children.count(this.props.children)));\n    }\n  }, {\n    key: 'renderThumbs',\n    value: function renderThumbs() {\n      if (!this.props.showThumbs || _react.Children.count(this.props.children) === 0) {\n        return null;\n      }\n\n      return _react2.default.createElement(_Thumbs2.default, {\n        ref: this.setThumbsRef,\n        onSelectItem: this.handleClickThumb,\n        selectedItem: this.state.selectedItem,\n        transitionTime: this.props.transitionTime,\n        thumbWidth: this.props.thumbWidth\n      }, this.props.children);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      if (!this.props.children || _react.Children.count(this.props.children) === 0) {\n        return null;\n      }\n\n      var isHorizontal = this.props.axis === 'horizontal';\n      var canShowArrows = this.props.showArrows && _react.Children.count(this.props.children) > 1; // show left arrow?\n\n      var hasPrev = canShowArrows && (this.state.selectedItem > 0 || this.props.infiniteLoop); // show right arrow\n\n      var hasNext = canShowArrows && (this.state.selectedItem < _react.Children.count(this.props.children) - 1 || this.props.infiniteLoop); // obj to hold the transformations and styles\n\n      var itemListStyles = {};\n      var currentPosition = this.getPosition(this.state.selectedItem); // if 3d is available, let's take advantage of the performance of transform\n\n      var transformProp = (0, _CSSTranslate2.default)(currentPosition + '%', this.props.axis);\n      var transitionTime = this.props.transitionTime + 'ms';\n      itemListStyles = {\n        'WebkitTransform': transformProp,\n        'MozTransform': transformProp,\n        'MsTransform': transformProp,\n        'OTransform': transformProp,\n        'transform': transformProp,\n        'msTransform': transformProp\n      };\n\n      if (!this.state.swiping) {\n        itemListStyles = _extends({}, itemListStyles, {\n          'WebkitTransitionDuration': transitionTime,\n          'MozTransitionDuration': transitionTime,\n          'MsTransitionDuration': transitionTime,\n          'OTransitionDuration': transitionTime,\n          'transitionDuration': transitionTime,\n          'msTransitionDuration': transitionTime\n        });\n      }\n\n      var itemsClone = this.renderItems(true);\n      var firstClone = itemsClone.shift();\n      var lastClone = itemsClone.pop();\n      var swiperProps = {\n        selectedItem: this.state.selectedItem,\n        className: _cssClasses2.default.SLIDER(true, this.state.swiping),\n        onSwipeMove: this.onSwipeMove,\n        onSwipeStart: this.onSwipeStart,\n        onSwipeEnd: this.onSwipeEnd,\n        style: itemListStyles,\n        tolerance: this.props.swipeScrollTolerance\n      };\n      var containerStyles = {};\n\n      if (isHorizontal) {\n        swiperProps.onSwipeLeft = this.onSwipeForward;\n        swiperProps.onSwipeRight = this.onSwipeBackwards;\n\n        if (this.props.dynamicHeight) {\n          var itemHeight = this.getVariableImageHeight(this.state.selectedItem);\n          swiperProps.style.height = itemHeight || 'auto';\n          containerStyles.height = itemHeight || 'auto';\n        }\n      } else {\n        swiperProps.onSwipeUp = this.props.verticalSwipe === 'natural' ? this.onSwipeBackwards : this.onSwipeForward;\n        swiperProps.onSwipeDown = this.props.verticalSwipe === 'natural' ? this.onSwipeForward : this.onSwipeBackwards;\n        swiperProps.style.height = this.state.itemSize;\n        containerStyles.height = this.state.itemSize;\n      }\n\n      return _react2.default.createElement('div', {\n        className: this.props.className,\n        ref: this.setCarouselWrapperRef\n      }, _react2.default.createElement('div', {\n        className: _cssClasses2.default.CAROUSEL(true),\n        style: {\n          width: this.props.width\n        }\n      }, _react2.default.createElement('button', {\n        type: 'button',\n        className: _cssClasses2.default.ARROW_PREV(!hasPrev),\n        onClick: this.onClickPrev\n      }), _react2.default.createElement('div', {\n        className: _cssClasses2.default.WRAPPER(true, this.props.axis),\n        style: containerStyles,\n        ref: this.setItemsWrapperRef\n      }, this.props.swipeable ? _react2.default.createElement(_reactEasySwipe2.default, _extends({\n        tagName: 'ul',\n        ref: this.setListRef\n      }, swiperProps, {\n        allowMouseEvents: this.props.emulateTouch\n      }), this.props.infiniteLoop && lastClone, this.renderItems(), this.props.infiniteLoop && firstClone) : _react2.default.createElement('ul', {\n        className: _cssClasses2.default.SLIDER(true, this.state.swiping),\n        ref: this.setListRef,\n        style: itemListStyles\n      }, this.props.infiniteLoop && lastClone, this.renderItems(), this.props.infiniteLoop && firstClone)), _react2.default.createElement('button', {\n        type: 'button',\n        className: _cssClasses2.default.ARROW_NEXT(!hasNext),\n        onClick: this.onClickNext\n      }), this.renderControls(), this.renderStatus()), this.renderThumbs());\n    }\n  }]);\n\n  return Carousel;\n}(_react.Component);\n\nCarousel.displayName = 'Carousel';\nCarousel.propTypes = {\n  className: _propTypes2.default.string,\n  children: _propTypes2.default.node,\n  showArrows: _propTypes2.default.bool,\n  showStatus: _propTypes2.default.bool,\n  showIndicators: _propTypes2.default.bool,\n  infiniteLoop: _propTypes2.default.bool,\n  showThumbs: _propTypes2.default.bool,\n  thumbWidth: _propTypes2.default.number,\n  selectedItem: _propTypes2.default.number,\n  onClickItem: _propTypes2.default.func.isRequired,\n  onClickThumb: _propTypes2.default.func.isRequired,\n  onChange: _propTypes2.default.func.isRequired,\n  axis: _propTypes2.default.oneOf(['horizontal', 'vertical']),\n  verticalSwipe: _propTypes2.default.oneOf(['natural', 'standard']),\n  width: customPropTypes.unit,\n  useKeyboardArrows: _propTypes2.default.bool,\n  autoPlay: _propTypes2.default.bool,\n  stopOnHover: _propTypes2.default.bool,\n  interval: _propTypes2.default.number,\n  transitionTime: _propTypes2.default.number,\n  swipeScrollTolerance: _propTypes2.default.number,\n  swipeable: _propTypes2.default.bool,\n  dynamicHeight: _propTypes2.default.bool,\n  emulateTouch: _propTypes2.default.bool,\n  statusFormatter: _propTypes2.default.func.isRequired,\n  centerMode: _propTypes2.default.bool,\n  centerSlidePercentage: _propTypes2.default.number\n};\nCarousel.defaultProps = {\n  showIndicators: true,\n  showArrows: true,\n  showStatus: true,\n  showThumbs: true,\n  infiniteLoop: false,\n  selectedItem: 0,\n  axis: 'horizontal',\n  verticalSwipe: 'standard',\n  width: '100%',\n  useKeyboardArrows: false,\n  autoPlay: false,\n  stopOnHover: true,\n  interval: 3000,\n  transitionTime: 350,\n  swipeScrollTolerance: 5,\n  swipeable: true,\n  dynamicHeight: false,\n  emulateTouch: false,\n  onClickItem: noop,\n  onClickThumb: noop,\n  onChange: noop,\n  statusFormatter: defaultStatusFormatter,\n  centerMode: false,\n  centerSlidePercentage: 80\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this5 = this;\n\n  this.setThumbsRef = function (node) {\n    _this5.thumbsRef = node;\n  };\n\n  this.setCarouselWrapperRef = function (node) {\n    _this5.carouselWrapperRef = node;\n  };\n\n  this.setListRef = function (node) {\n    _this5.listRef = node;\n  };\n\n  this.setItemsWrapperRef = function (node) {\n    _this5.itemsWrapperRef = node;\n  };\n\n  this.setItemsRef = function (node, index) {\n    if (!_this5.itemsRef) {\n      _this5.itemsRef = [];\n    }\n\n    _this5.itemsRef[index] = node;\n  };\n\n  this.autoPlay = function () {\n    if (!_this5.state.autoPlay || _react.Children.count(_this5.props.children) <= 1) {\n      return;\n    }\n\n    clearTimeout(_this5.timer);\n    _this5.timer = setTimeout(function () {\n      _this5.increment();\n    }, _this5.props.interval);\n  };\n\n  this.clearAutoPlay = function () {\n    if (!_this5.state.autoPlay) {\n      return;\n    }\n\n    clearTimeout(_this5.timer);\n  };\n\n  this.resetAutoPlay = function () {\n    _this5.clearAutoPlay();\n\n    _this5.autoPlay();\n  };\n\n  this.stopOnHover = function () {\n    _this5.setState({\n      isMouseEntered: true\n    });\n\n    _this5.clearAutoPlay();\n  };\n\n  this.startOnLeave = function () {\n    _this5.setState({\n      isMouseEntered: false\n    });\n\n    _this5.autoPlay();\n  };\n\n  this.navigateWithKeyboard = function (e) {\n    var axis = _this5.props.axis;\n    var isHorizontal = axis === 'horizontal';\n    var keyNames = {\n      ArrowUp: 38,\n      ArrowRight: 39,\n      ArrowDown: 40,\n      ArrowLeft: 37\n    };\n    var nextKey = isHorizontal ? keyNames.ArrowRight : keyNames.ArrowDown;\n    var prevKey = isHorizontal ? keyNames.ArrowLeft : keyNames.ArrowUp;\n\n    if (nextKey === e.keyCode) {\n      _this5.increment();\n    } else if (prevKey === e.keyCode) {\n      _this5.decrement();\n    }\n  };\n\n  this.updateSizes = function () {\n    if (!_this5.state.initialized) {\n      return;\n    }\n\n    var isHorizontal = _this5.props.axis === 'horizontal';\n    var firstItem = _this5.itemsRef[0];\n    var itemSize = isHorizontal ? firstItem.clientWidth : firstItem.clientHeight;\n\n    _this5.setState(function (_state, props) {\n      return {\n        itemSize: itemSize,\n        wrapperSize: isHorizontal ? itemSize * _react.Children.count(props.children) : itemSize\n      };\n    });\n\n    if (_this5.thumbsRef) {\n      _this5.thumbsRef.updateSizes();\n    }\n  };\n\n  this.setMountState = function () {\n    _this5.setState({\n      hasMount: true\n    });\n\n    _this5.updateSizes();\n  };\n\n  this.handleClickItem = function (index, item) {\n    if (_react.Children.count(_this5.props.children) === 0) {\n      return;\n    }\n\n    if (_this5.state.cancelClick) {\n      _this5.setState({\n        cancelClick: false\n      });\n\n      return;\n    }\n\n    _this5.props.onClickItem(index, item);\n\n    if (index !== _this5.state.selectedItem) {\n      _this5.setState({\n        selectedItem: index\n      });\n    }\n  };\n\n  this.handleOnChange = function (index, item) {\n    if (_react.Children.count(_this5.props.children) <= 1) {\n      return;\n    }\n\n    _this5.props.onChange(index, item);\n  };\n\n  this.handleClickThumb = function (index, item) {\n    _this5.props.onClickThumb(index, item);\n\n    _this5.selectItem({\n      selectedItem: index\n    });\n  };\n\n  this.onSwipeStart = function () {\n    _this5.setState({\n      swiping: true\n    });\n\n    _this5.clearAutoPlay();\n  };\n\n  this.onSwipeEnd = function () {\n    _this5.setState({\n      swiping: false,\n      cancelClick: false\n    });\n\n    _this5.autoPlay();\n  };\n\n  this.onSwipeMove = function (delta) {\n    var isHorizontal = _this5.props.axis === 'horizontal';\n\n    var childrenLength = _react.Children.count(_this5.props.children);\n\n    var initialBoundry = 0;\n\n    var currentPosition = _this5.getPosition(_this5.state.selectedItem);\n\n    var finalBoundry = _this5.props.infiniteLoop ? _this5.getPosition(childrenLength - 1) - 100 : _this5.getPosition(childrenLength - 1);\n    var axisDelta = isHorizontal ? delta.x : delta.y;\n    var handledDelta = axisDelta; // prevent user from swiping left out of boundaries\n\n    if (currentPosition === initialBoundry && axisDelta > 0) {\n      handledDelta = 0;\n    } // prevent user from swiping right out of boundaries\n\n\n    if (currentPosition === finalBoundry && axisDelta < 0) {\n      handledDelta = 0;\n    }\n\n    var position = currentPosition + 100 / (_this5.state.itemSize / handledDelta);\n\n    if (_this5.props.infiniteLoop) {\n      // When allowing infinite loop, if we slide left from position 0 we reveal the cloned last slide that appears before it\n      // if we slide even further we need to jump to other side so it can continue - and vice versa for the last slide\n      if (_this5.state.selectedItem === 0 && position > -100) {\n        position -= childrenLength * 100;\n      } else if (_this5.state.selectedItem === childrenLength - 1 && position < -childrenLength * 100) {\n        position += childrenLength * 100;\n      }\n    }\n\n    position += '%';\n\n    _this5.setPosition(position); // allows scroll if the swipe was within the tolerance\n\n\n    var hasMoved = Math.abs(axisDelta) > _this5.props.swipeScrollTolerance;\n\n    if (hasMoved && !_this5.state.cancelClick) {\n      _this5.setState({\n        cancelClick: true\n      });\n    }\n\n    return hasMoved;\n  };\n\n  this.setPosition = function (position, forceReflow) {\n    var list = _reactDom2.default.findDOMNode(_this5.listRef);\n\n    ['WebkitTransform', 'MozTransform', 'MsTransform', 'OTransform', 'transform', 'msTransform'].forEach(function (prop) {\n      list.style[prop] = (0, _CSSTranslate2.default)(position, _this5.props.axis);\n    });\n\n    if (forceReflow) {\n      list.offsetLeft;\n    }\n  };\n\n  this.resetPosition = function () {\n    var currentPosition = _this5.getPosition(_this5.state.selectedItem) + '%';\n\n    _this5.setPosition(currentPosition);\n  };\n\n  this.decrement = function () {\n    var positions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n    var fromSwipe = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n    _this5.moveTo(_this5.state.selectedItem - (typeof positions === 'number' ? positions : 1), fromSwipe);\n  };\n\n  this.increment = function () {\n    var positions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n    var fromSwipe = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n    _this5.moveTo(_this5.state.selectedItem + (typeof positions === 'number' ? positions : 1), fromSwipe);\n  };\n\n  this.moveTo = function (position, fromSwipe) {\n    var lastPosition = _react.Children.count(_this5.props.children) - 1;\n    var needClonedSlide = _this5.props.infiniteLoop && !fromSwipe && (position < 0 || position > lastPosition);\n    var oldPosition = position;\n\n    if (position < 0) {\n      position = _this5.props.infiniteLoop ? lastPosition : 0;\n    }\n\n    if (position > lastPosition) {\n      position = _this5.props.infiniteLoop ? 0 : lastPosition;\n    }\n\n    if (needClonedSlide) {\n      // set swiping true would disable transition time, then we set slider to cloned position and force a reflow\n      // this is only needed for non-swiping situation\n      _this5.setState({\n        swiping: true\n      }, function () {\n        if (oldPosition < 0) {\n          if (_this5.props.centerMode && _this5.props.axis === 'horizontal') {\n            _this5.setPosition('-' + ((lastPosition + 2) * _this5.props.centerSlidePercentage - (100 - _this5.props.centerSlidePercentage) / 2) + '%', true);\n          } else {\n            _this5.setPosition('-' + (lastPosition + 2) * 100 + '%', true);\n          }\n        } else if (oldPosition > lastPosition) {\n          _this5.setPosition(0, true);\n        }\n\n        _this5.selectItem({\n          selectedItem: position,\n          swiping: false\n        });\n      });\n    } else {\n      _this5.selectItem({\n        // if it's not a slider, we don't need to set position here\n        selectedItem: position\n      });\n    } // don't reset auto play when stop on hover is enabled, doing so will trigger a call to auto play more than once\n    // and will result in the interval function not being cleared correctly.\n\n\n    if (_this5.state.autoPlay && _this5.state.isMouseEntered === false) {\n      _this5.resetAutoPlay();\n    }\n  };\n\n  this.onClickNext = function () {\n    _this5.increment(1, false);\n  };\n\n  this.onClickPrev = function () {\n    _this5.decrement(1, false);\n  };\n\n  this.onSwipeForward = function () {\n    _this5.increment(1, true);\n  };\n\n  this.onSwipeBackwards = function () {\n    _this5.decrement(1, true);\n  };\n\n  this.changeItem = function (e) {\n    if (!e.key || e.key === 'Enter') {\n      var newIndex = e.target.value;\n\n      _this5.selectItem({\n        selectedItem: newIndex\n      });\n    }\n  };\n\n  this.selectItem = function (state, cb) {\n    _this5.setState(state, cb);\n\n    _this5.handleOnChange(state.selectedItem, _react.Children.toArray(_this5.props.children)[state.selectedItem]);\n  };\n\n  this.getInitialImage = function () {\n    var selectedItem = _this5.props.selectedItem;\n    var item = _this5.itemsRef && _this5.itemsRef[selectedItem];\n    var images = item && item.getElementsByTagName('img');\n    return images && images[selectedItem];\n  };\n\n  this.getVariableImageHeight = function (position) {\n    var item = _this5.itemsRef && _this5.itemsRef[position];\n    var images = item && item.getElementsByTagName('img');\n\n    if (_this5.state.hasMount && images.length > 0) {\n      var image = images[0];\n\n      if (!image.complete) {\n        // if the image is still loading, the size won't be available so we trigger a new render after it's done\n        var onImageLoad = function onImageLoad() {\n          _this5.forceUpdate();\n\n          image.removeEventListener('load', onImageLoad);\n        };\n\n        image.addEventListener('load', onImageLoad);\n      }\n\n      var height = image.clientHeight;\n      return height > 0 ? height : null;\n    }\n\n    return null;\n  };\n};\n\nexports.default = Carousel;","map":{"version":3,"sources":["/home/chuka/joe/ChopChowSD/client/node_modules/react-responsive-carousel/lib/components/Carousel.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react","require","_react2","_interopRequireDefault","_reactDom","_reactDom2","_propTypes","_propTypes2","_cssClasses","_cssClasses2","_CSSTranslate","_CSSTranslate2","_reactEasySwipe","_reactEasySwipe2","_Thumbs","_Thumbs2","_customPropTypes","customPropTypes","_interopRequireWildcard","obj","__esModule","newObj","default","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","noop","defaultStatusFormatter","current","total","Carousel","_Component","_this","getPrototypeOf","_initialiseProps","state","initialized","selectedItem","hasMount","isMouseEntered","autoPlay","componentDidMount","children","setupCarousel","componentWillReceiveProps","nextProps","_this2","updateSizes","moveTo","setState","setupAutoPlay","destroyAutoPlay","componentDidUpdate","prevProps","prevState","swiping","resetPosition","componentWillUnmount","destroyCarousel","bindEvents","Children","count","initialImage","getInitialImage","addEventListener","setMountState","unbindEvents","carouselWrapper","carouselWrapperRef","stopOnHover","startOnLeave","clearAutoPlay","removeEventListener","window","useKeyboardArrows","document","navigateWithKeyboard","getPosition","index","infiniteLoop","childrenLength","centerMode","axis","currentPosition","centerSlidePercentage","lastPosition","renderItems","isClone","_this3","map","item","slideProps","ref","e","setItemsRef","className","ITEM","onClick","handleClickItem","bind","style","minWidth","createElement","renderControls","_this4","showIndicators","DOT","changeItem","onKeyDown","role","tabIndex","renderStatus","showStatus","statusFormatter","renderThumbs","showThumbs","setThumbsRef","onSelectItem","handleClickThumb","transitionTime","thumbWidth","render","isHorizontal","canShowArrows","showArrows","hasPrev","hasNext","itemListStyles","transformProp","itemsClone","firstClone","shift","lastClone","pop","swiperProps","SLIDER","onSwipeMove","onSwipeStart","onSwipeEnd","tolerance","swipeScrollTolerance","containerStyles","onSwipeLeft","onSwipeForward","onSwipeRight","onSwipeBackwards","dynamicHeight","itemHeight","getVariableImageHeight","height","onSwipeUp","verticalSwipe","onSwipeDown","itemSize","setCarouselWrapperRef","CAROUSEL","width","type","ARROW_PREV","onClickPrev","WRAPPER","setItemsWrapperRef","swipeable","tagName","setListRef","allowMouseEvents","emulateTouch","ARROW_NEXT","onClickNext","Component","displayName","propTypes","string","node","bool","number","onClickItem","func","isRequired","onClickThumb","onChange","oneOf","unit","interval","defaultProps","_this5","thumbsRef","listRef","itemsWrapperRef","itemsRef","clearTimeout","timer","setTimeout","increment","resetAutoPlay","keyNames","ArrowUp","ArrowRight","ArrowDown","ArrowLeft","nextKey","prevKey","keyCode","decrement","firstItem","clientWidth","clientHeight","_state","wrapperSize","cancelClick","handleOnChange","selectItem","delta","initialBoundry","finalBoundry","axisDelta","x","y","handledDelta","position","setPosition","hasMoved","Math","abs","forceReflow","list","findDOMNode","forEach","prop","offsetLeft","positions","undefined","fromSwipe","needClonedSlide","oldPosition","newIndex","cb","toArray","images","getElementsByTagName","image","complete","onImageLoad","forceUpdate"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _cssClasses = require('../cssClasses');\n\nvar _cssClasses2 = _interopRequireDefault(_cssClasses);\n\nvar _CSSTranslate = require('../CSSTranslate');\n\nvar _CSSTranslate2 = _interopRequireDefault(_CSSTranslate);\n\nvar _reactEasySwipe = require('react-easy-swipe');\n\nvar _reactEasySwipe2 = _interopRequireDefault(_reactEasySwipe);\n\nvar _Thumbs = require('./Thumbs');\n\nvar _Thumbs2 = _interopRequireDefault(_Thumbs);\n\nvar _customPropTypes = require('../customPropTypes');\n\nvar customPropTypes = _interopRequireWildcard(_customPropTypes);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar noop = function noop() {};\n\nvar defaultStatusFormatter = function defaultStatusFormatter(current, total) {\n    return current + ' of ' + total;\n};\n\nvar Carousel = function (_Component) {\n    _inherits(Carousel, _Component);\n\n    function Carousel(props) {\n        _classCallCheck(this, Carousel);\n\n        var _this = _possibleConstructorReturn(this, (Carousel.__proto__ || Object.getPrototypeOf(Carousel)).call(this, props));\n\n        _initialiseProps.call(_this);\n\n        _this.state = {\n            initialized: false,\n            selectedItem: props.selectedItem,\n            hasMount: false,\n            isMouseEntered: false,\n            autoPlay: props.autoPlay\n        };\n        return _this;\n    }\n\n    _createClass(Carousel, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            if (!this.props.children) {\n                return;\n            }\n\n            this.setupCarousel();\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps) {\n            var _this2 = this;\n\n            if (nextProps.selectedItem !== this.state.selectedItem) {\n                this.updateSizes();\n                this.moveTo(nextProps.selectedItem);\n            }\n\n            if (nextProps.autoPlay !== this.state.autoPlay) {\n                this.setState({\n                    autoPlay: nextProps.autoPlay\n                }, function () {\n                    if (_this2.state.autoPlay) {\n                        _this2.setupAutoPlay();\n                    } else {\n                        _this2.destroyAutoPlay();\n                    }\n                });\n            }\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps, prevState) {\n            if (!prevProps.children && this.props.children && !this.state.initialized) {\n                this.setupCarousel();\n            }\n            if (prevState.swiping && !this.state.swiping) {\n                // We stopped swiping, ensure we are heading to the new/current slide and not stuck\n                this.resetPosition();\n            }\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            this.destroyCarousel();\n        }\n    }, {\n        key: 'setupCarousel',\n        value: function setupCarousel() {\n            this.bindEvents();\n\n            if (this.state.autoPlay && _react.Children.count(this.props.children) > 1) {\n                this.setupAutoPlay();\n            }\n\n            this.setState({\n                initialized: true\n            });\n\n            var initialImage = this.getInitialImage();\n            if (initialImage) {\n                // if it's a carousel of images, we set the mount state after the first image is loaded\n                initialImage.addEventListener('load', this.setMountState);\n            } else {\n                this.setMountState();\n            }\n        }\n    }, {\n        key: 'destroyCarousel',\n        value: function destroyCarousel() {\n            if (this.state.initialized) {\n                this.unbindEvents();\n                this.destroyAutoPlay();\n            }\n        }\n    }, {\n        key: 'setupAutoPlay',\n        value: function setupAutoPlay() {\n            this.autoPlay();\n            var carouselWrapper = this.carouselWrapperRef;\n\n            if (this.props.stopOnHover && carouselWrapper) {\n                carouselWrapper.addEventListener('mouseenter', this.stopOnHover);\n                carouselWrapper.addEventListener('mouseleave', this.startOnLeave);\n            }\n        }\n    }, {\n        key: 'destroyAutoPlay',\n        value: function destroyAutoPlay() {\n            this.clearAutoPlay();\n            var carouselWrapper = this.carouselWrapperRef;\n\n            if (this.props.stopOnHover && carouselWrapper) {\n                carouselWrapper.removeEventListener('mouseenter', this.stopOnHover);\n                carouselWrapper.removeEventListener('mouseleave', this.startOnLeave);\n            }\n        }\n    }, {\n        key: 'bindEvents',\n        value: function bindEvents() {\n            // as the widths are calculated, we need to resize\n            // the carousel when the window is resized\n            window.addEventListener(\"resize\", this.updateSizes);\n            // issue #2 - image loading smaller\n            window.addEventListener(\"DOMContentLoaded\", this.updateSizes);\n\n            if (this.props.useKeyboardArrows) {\n                document.addEventListener(\"keydown\", this.navigateWithKeyboard);\n            }\n        }\n    }, {\n        key: 'unbindEvents',\n        value: function unbindEvents() {\n            // removing listeners\n            window.removeEventListener(\"resize\", this.updateSizes);\n            window.removeEventListener(\"DOMContentLoaded\", this.updateSizes);\n\n            var initialImage = this.getInitialImage();\n            if (initialImage) {\n                initialImage.removeEventListener(\"load\", this.setMountState);\n            }\n\n            if (this.props.useKeyboardArrows) {\n                document.removeEventListener(\"keydown\", this.navigateWithKeyboard);\n            }\n        }\n    }, {\n        key: 'getPosition',\n        value: function getPosition(index) {\n            if (this.props.infiniteLoop) {\n                // index has to be added by 1 because of the first cloned slide\n                ++index;\n            }\n            var childrenLength = _react.Children.count(this.props.children);\n            if (this.props.centerMode && this.props.axis === 'horizontal') {\n                var currentPosition = -index * this.props.centerSlidePercentage;\n                var lastPosition = childrenLength - 1;\n\n                if (index && (index !== lastPosition || this.props.infiniteLoop)) {\n                    currentPosition += (100 - this.props.centerSlidePercentage) / 2;\n                } else if (index === lastPosition) {\n                    currentPosition += 100 - this.props.centerSlidePercentage;\n                }\n\n                return currentPosition;\n            }\n\n            return -index * 100;\n        }\n    }, {\n        key: 'renderItems',\n        value: function renderItems(isClone) {\n            var _this3 = this;\n\n            return _react.Children.map(this.props.children, function (item, index) {\n                var slideProps = {\n                    ref: function ref(e) {\n                        return _this3.setItemsRef(e, index);\n                    },\n                    key: 'itemKey' + index + (isClone ? 'clone' : ''),\n                    className: _cssClasses2.default.ITEM(true, index === _this3.state.selectedItem),\n                    onClick: _this3.handleClickItem.bind(_this3, index, item)\n                };\n\n                if (_this3.props.centerMode && _this3.props.axis === 'horizontal') {\n                    slideProps.style = {\n                        minWidth: _this3.props.centerSlidePercentage + '%'\n                    };\n                }\n\n                return _react2.default.createElement(\n                    'li',\n                    slideProps,\n                    item\n                );\n            });\n        }\n    }, {\n        key: 'renderControls',\n        value: function renderControls() {\n            var _this4 = this;\n\n            if (!this.props.showIndicators) {\n                return null;\n            }\n\n            return _react2.default.createElement(\n                'ul',\n                { className: 'control-dots' },\n                _react.Children.map(this.props.children, function (item, index) {\n                    return _react2.default.createElement('li', { className: _cssClasses2.default.DOT(index === _this4.state.selectedItem), onClick: _this4.changeItem, onKeyDown: _this4.changeItem, value: index, key: index, role: 'button', tabIndex: 0 });\n                })\n            );\n        }\n    }, {\n        key: 'renderStatus',\n        value: function renderStatus() {\n            if (!this.props.showStatus) {\n                return null;\n            }\n\n            return _react2.default.createElement(\n                'p',\n                { className: 'carousel-status' },\n                this.props.statusFormatter(this.state.selectedItem + 1, _react.Children.count(this.props.children))\n            );\n        }\n    }, {\n        key: 'renderThumbs',\n        value: function renderThumbs() {\n            if (!this.props.showThumbs || _react.Children.count(this.props.children) === 0) {\n                return null;\n            }\n\n            return _react2.default.createElement(\n                _Thumbs2.default,\n                { ref: this.setThumbsRef, onSelectItem: this.handleClickThumb, selectedItem: this.state.selectedItem, transitionTime: this.props.transitionTime, thumbWidth: this.props.thumbWidth },\n                this.props.children\n            );\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            if (!this.props.children || _react.Children.count(this.props.children) === 0) {\n                return null;\n            }\n\n            var isHorizontal = this.props.axis === 'horizontal';\n\n            var canShowArrows = this.props.showArrows && _react.Children.count(this.props.children) > 1;\n\n            // show left arrow?\n            var hasPrev = canShowArrows && (this.state.selectedItem > 0 || this.props.infiniteLoop);\n            // show right arrow\n            var hasNext = canShowArrows && (this.state.selectedItem < _react.Children.count(this.props.children) - 1 || this.props.infiniteLoop);\n            // obj to hold the transformations and styles\n            var itemListStyles = {};\n\n            var currentPosition = this.getPosition(this.state.selectedItem);\n\n            // if 3d is available, let's take advantage of the performance of transform\n            var transformProp = (0, _CSSTranslate2.default)(currentPosition + '%', this.props.axis);\n\n            var transitionTime = this.props.transitionTime + 'ms';\n\n            itemListStyles = {\n                'WebkitTransform': transformProp,\n                'MozTransform': transformProp,\n                'MsTransform': transformProp,\n                'OTransform': transformProp,\n                'transform': transformProp,\n                'msTransform': transformProp\n            };\n\n            if (!this.state.swiping) {\n                itemListStyles = _extends({}, itemListStyles, {\n                    'WebkitTransitionDuration': transitionTime,\n                    'MozTransitionDuration': transitionTime,\n                    'MsTransitionDuration': transitionTime,\n                    'OTransitionDuration': transitionTime,\n                    'transitionDuration': transitionTime,\n                    'msTransitionDuration': transitionTime\n                });\n            }\n\n            var itemsClone = this.renderItems(true);\n            var firstClone = itemsClone.shift();\n            var lastClone = itemsClone.pop();\n\n            var swiperProps = {\n                selectedItem: this.state.selectedItem,\n                className: _cssClasses2.default.SLIDER(true, this.state.swiping),\n                onSwipeMove: this.onSwipeMove,\n                onSwipeStart: this.onSwipeStart,\n                onSwipeEnd: this.onSwipeEnd,\n                style: itemListStyles,\n                tolerance: this.props.swipeScrollTolerance\n            };\n\n            var containerStyles = {};\n\n            if (isHorizontal) {\n                swiperProps.onSwipeLeft = this.onSwipeForward;\n                swiperProps.onSwipeRight = this.onSwipeBackwards;\n\n                if (this.props.dynamicHeight) {\n                    var itemHeight = this.getVariableImageHeight(this.state.selectedItem);\n                    swiperProps.style.height = itemHeight || 'auto';\n                    containerStyles.height = itemHeight || 'auto';\n                }\n            } else {\n                swiperProps.onSwipeUp = this.props.verticalSwipe === 'natural' ? this.onSwipeBackwards : this.onSwipeForward;\n                swiperProps.onSwipeDown = this.props.verticalSwipe === 'natural' ? this.onSwipeForward : this.onSwipeBackwards;\n                swiperProps.style.height = this.state.itemSize;\n                containerStyles.height = this.state.itemSize;\n            }\n            return _react2.default.createElement(\n                'div',\n                { className: this.props.className, ref: this.setCarouselWrapperRef },\n                _react2.default.createElement(\n                    'div',\n                    { className: _cssClasses2.default.CAROUSEL(true), style: { width: this.props.width } },\n                    _react2.default.createElement('button', { type: 'button', className: _cssClasses2.default.ARROW_PREV(!hasPrev), onClick: this.onClickPrev }),\n                    _react2.default.createElement(\n                        'div',\n                        { className: _cssClasses2.default.WRAPPER(true, this.props.axis), style: containerStyles, ref: this.setItemsWrapperRef },\n                        this.props.swipeable ? _react2.default.createElement(\n                            _reactEasySwipe2.default,\n                            _extends({\n                                tagName: 'ul',\n                                ref: this.setListRef\n                            }, swiperProps, {\n                                allowMouseEvents: this.props.emulateTouch }),\n                            this.props.infiniteLoop && lastClone,\n                            this.renderItems(),\n                            this.props.infiniteLoop && firstClone\n                        ) : _react2.default.createElement(\n                            'ul',\n                            {\n                                className: _cssClasses2.default.SLIDER(true, this.state.swiping),\n                                ref: this.setListRef,\n                                style: itemListStyles },\n                            this.props.infiniteLoop && lastClone,\n                            this.renderItems(),\n                            this.props.infiniteLoop && firstClone\n                        )\n                    ),\n                    _react2.default.createElement('button', { type: 'button', className: _cssClasses2.default.ARROW_NEXT(!hasNext), onClick: this.onClickNext }),\n                    this.renderControls(),\n                    this.renderStatus()\n                ),\n                this.renderThumbs()\n            );\n        }\n    }]);\n\n    return Carousel;\n}(_react.Component);\n\nCarousel.displayName = 'Carousel';\nCarousel.propTypes = {\n    className: _propTypes2.default.string,\n    children: _propTypes2.default.node,\n    showArrows: _propTypes2.default.bool,\n    showStatus: _propTypes2.default.bool,\n    showIndicators: _propTypes2.default.bool,\n    infiniteLoop: _propTypes2.default.bool,\n    showThumbs: _propTypes2.default.bool,\n    thumbWidth: _propTypes2.default.number,\n    selectedItem: _propTypes2.default.number,\n    onClickItem: _propTypes2.default.func.isRequired,\n    onClickThumb: _propTypes2.default.func.isRequired,\n    onChange: _propTypes2.default.func.isRequired,\n    axis: _propTypes2.default.oneOf(['horizontal', 'vertical']),\n    verticalSwipe: _propTypes2.default.oneOf(['natural', 'standard']),\n    width: customPropTypes.unit,\n    useKeyboardArrows: _propTypes2.default.bool,\n    autoPlay: _propTypes2.default.bool,\n    stopOnHover: _propTypes2.default.bool,\n    interval: _propTypes2.default.number,\n    transitionTime: _propTypes2.default.number,\n    swipeScrollTolerance: _propTypes2.default.number,\n    swipeable: _propTypes2.default.bool,\n    dynamicHeight: _propTypes2.default.bool,\n    emulateTouch: _propTypes2.default.bool,\n    statusFormatter: _propTypes2.default.func.isRequired,\n    centerMode: _propTypes2.default.bool,\n    centerSlidePercentage: _propTypes2.default.number\n};\nCarousel.defaultProps = {\n    showIndicators: true,\n    showArrows: true,\n    showStatus: true,\n    showThumbs: true,\n    infiniteLoop: false,\n    selectedItem: 0,\n    axis: 'horizontal',\n    verticalSwipe: 'standard',\n    width: '100%',\n    useKeyboardArrows: false,\n    autoPlay: false,\n    stopOnHover: true,\n    interval: 3000,\n    transitionTime: 350,\n    swipeScrollTolerance: 5,\n    swipeable: true,\n    dynamicHeight: false,\n    emulateTouch: false,\n    onClickItem: noop,\n    onClickThumb: noop,\n    onChange: noop,\n    statusFormatter: defaultStatusFormatter,\n    centerMode: false,\n    centerSlidePercentage: 80\n};\n\nvar _initialiseProps = function _initialiseProps() {\n    var _this5 = this;\n\n    this.setThumbsRef = function (node) {\n        _this5.thumbsRef = node;\n    };\n\n    this.setCarouselWrapperRef = function (node) {\n        _this5.carouselWrapperRef = node;\n    };\n\n    this.setListRef = function (node) {\n        _this5.listRef = node;\n    };\n\n    this.setItemsWrapperRef = function (node) {\n        _this5.itemsWrapperRef = node;\n    };\n\n    this.setItemsRef = function (node, index) {\n        if (!_this5.itemsRef) {\n            _this5.itemsRef = [];\n        }\n        _this5.itemsRef[index] = node;\n    };\n\n    this.autoPlay = function () {\n        if (!_this5.state.autoPlay || _react.Children.count(_this5.props.children) <= 1) {\n            return;\n        }\n\n        clearTimeout(_this5.timer);\n        _this5.timer = setTimeout(function () {\n            _this5.increment();\n        }, _this5.props.interval);\n    };\n\n    this.clearAutoPlay = function () {\n        if (!_this5.state.autoPlay) {\n            return;\n        }\n\n        clearTimeout(_this5.timer);\n    };\n\n    this.resetAutoPlay = function () {\n        _this5.clearAutoPlay();\n        _this5.autoPlay();\n    };\n\n    this.stopOnHover = function () {\n        _this5.setState({ isMouseEntered: true });\n        _this5.clearAutoPlay();\n    };\n\n    this.startOnLeave = function () {\n        _this5.setState({ isMouseEntered: false });\n        _this5.autoPlay();\n    };\n\n    this.navigateWithKeyboard = function (e) {\n        var axis = _this5.props.axis;\n\n        var isHorizontal = axis === 'horizontal';\n        var keyNames = {\n            ArrowUp: 38,\n            ArrowRight: 39,\n            ArrowDown: 40,\n            ArrowLeft: 37\n        };\n\n        var nextKey = isHorizontal ? keyNames.ArrowRight : keyNames.ArrowDown;\n        var prevKey = isHorizontal ? keyNames.ArrowLeft : keyNames.ArrowUp;\n\n        if (nextKey === e.keyCode) {\n            _this5.increment();\n        } else if (prevKey === e.keyCode) {\n            _this5.decrement();\n        }\n    };\n\n    this.updateSizes = function () {\n        if (!_this5.state.initialized) {\n            return;\n        }\n\n        var isHorizontal = _this5.props.axis === 'horizontal';\n        var firstItem = _this5.itemsRef[0];\n        var itemSize = isHorizontal ? firstItem.clientWidth : firstItem.clientHeight;\n\n        _this5.setState(function (_state, props) {\n            return {\n                itemSize: itemSize,\n                wrapperSize: isHorizontal ? itemSize * _react.Children.count(props.children) : itemSize\n            };\n        });\n\n        if (_this5.thumbsRef) {\n            _this5.thumbsRef.updateSizes();\n        }\n    };\n\n    this.setMountState = function () {\n        _this5.setState({ hasMount: true });\n        _this5.updateSizes();\n    };\n\n    this.handleClickItem = function (index, item) {\n        if (_react.Children.count(_this5.props.children) === 0) {\n            return;\n        }\n\n        if (_this5.state.cancelClick) {\n            _this5.setState({\n                cancelClick: false\n            });\n\n            return;\n        }\n\n        _this5.props.onClickItem(index, item);\n\n        if (index !== _this5.state.selectedItem) {\n            _this5.setState({\n                selectedItem: index\n            });\n        }\n    };\n\n    this.handleOnChange = function (index, item) {\n        if (_react.Children.count(_this5.props.children) <= 1) {\n            return;\n        }\n\n        _this5.props.onChange(index, item);\n    };\n\n    this.handleClickThumb = function (index, item) {\n        _this5.props.onClickThumb(index, item);\n\n        _this5.selectItem({\n            selectedItem: index\n        });\n    };\n\n    this.onSwipeStart = function () {\n        _this5.setState({\n            swiping: true\n        });\n        _this5.clearAutoPlay();\n    };\n\n    this.onSwipeEnd = function () {\n        _this5.setState({\n            swiping: false,\n            cancelClick: false\n        });\n        _this5.autoPlay();\n    };\n\n    this.onSwipeMove = function (delta) {\n        var isHorizontal = _this5.props.axis === 'horizontal';\n        var childrenLength = _react.Children.count(_this5.props.children);\n\n        var initialBoundry = 0;\n\n        var currentPosition = _this5.getPosition(_this5.state.selectedItem);\n        var finalBoundry = _this5.props.infiniteLoop ? _this5.getPosition(childrenLength - 1) - 100 : _this5.getPosition(childrenLength - 1);\n\n        var axisDelta = isHorizontal ? delta.x : delta.y;\n        var handledDelta = axisDelta;\n\n        // prevent user from swiping left out of boundaries\n        if (currentPosition === initialBoundry && axisDelta > 0) {\n            handledDelta = 0;\n        }\n\n        // prevent user from swiping right out of boundaries\n        if (currentPosition === finalBoundry && axisDelta < 0) {\n            handledDelta = 0;\n        }\n\n        var position = currentPosition + 100 / (_this5.state.itemSize / handledDelta);\n        if (_this5.props.infiniteLoop) {\n            // When allowing infinite loop, if we slide left from position 0 we reveal the cloned last slide that appears before it\n            // if we slide even further we need to jump to other side so it can continue - and vice versa for the last slide\n            if (_this5.state.selectedItem === 0 && position > -100) {\n                position -= childrenLength * 100;\n            } else if (_this5.state.selectedItem === childrenLength - 1 && position < -childrenLength * 100) {\n                position += childrenLength * 100;\n            }\n        }\n        position += '%';\n        _this5.setPosition(position);\n\n        // allows scroll if the swipe was within the tolerance\n        var hasMoved = Math.abs(axisDelta) > _this5.props.swipeScrollTolerance;\n\n        if (hasMoved && !_this5.state.cancelClick) {\n            _this5.setState({\n                cancelClick: true\n            });\n        }\n\n        return hasMoved;\n    };\n\n    this.setPosition = function (position, forceReflow) {\n        var list = _reactDom2.default.findDOMNode(_this5.listRef);\n        ['WebkitTransform', 'MozTransform', 'MsTransform', 'OTransform', 'transform', 'msTransform'].forEach(function (prop) {\n            list.style[prop] = (0, _CSSTranslate2.default)(position, _this5.props.axis);\n        });\n        if (forceReflow) {\n            list.offsetLeft;\n        }\n    };\n\n    this.resetPosition = function () {\n        var currentPosition = _this5.getPosition(_this5.state.selectedItem) + '%';\n        _this5.setPosition(currentPosition);\n    };\n\n    this.decrement = function () {\n        var positions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n        var fromSwipe = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n        _this5.moveTo(_this5.state.selectedItem - (typeof positions === 'number' ? positions : 1), fromSwipe);\n    };\n\n    this.increment = function () {\n        var positions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n        var fromSwipe = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n        _this5.moveTo(_this5.state.selectedItem + (typeof positions === 'number' ? positions : 1), fromSwipe);\n    };\n\n    this.moveTo = function (position, fromSwipe) {\n        var lastPosition = _react.Children.count(_this5.props.children) - 1;\n        var needClonedSlide = _this5.props.infiniteLoop && !fromSwipe && (position < 0 || position > lastPosition);\n        var oldPosition = position;\n\n        if (position < 0) {\n            position = _this5.props.infiniteLoop ? lastPosition : 0;\n        }\n\n        if (position > lastPosition) {\n            position = _this5.props.infiniteLoop ? 0 : lastPosition;\n        }\n\n        if (needClonedSlide) {\n            // set swiping true would disable transition time, then we set slider to cloned position and force a reflow\n            // this is only needed for non-swiping situation\n            _this5.setState({\n                swiping: true\n            }, function () {\n                if (oldPosition < 0) {\n                    if (_this5.props.centerMode && _this5.props.axis === 'horizontal') {\n                        _this5.setPosition('-' + ((lastPosition + 2) * _this5.props.centerSlidePercentage - (100 - _this5.props.centerSlidePercentage) / 2) + '%', true);\n                    } else {\n                        _this5.setPosition('-' + (lastPosition + 2) * 100 + '%', true);\n                    }\n                } else if (oldPosition > lastPosition) {\n                    _this5.setPosition(0, true);\n                }\n\n                _this5.selectItem({\n                    selectedItem: position,\n                    swiping: false\n                });\n            });\n        } else {\n            _this5.selectItem({\n                // if it's not a slider, we don't need to set position here\n                selectedItem: position\n            });\n        }\n\n        // don't reset auto play when stop on hover is enabled, doing so will trigger a call to auto play more than once\n        // and will result in the interval function not being cleared correctly.\n        if (_this5.state.autoPlay && _this5.state.isMouseEntered === false) {\n            _this5.resetAutoPlay();\n        }\n    };\n\n    this.onClickNext = function () {\n        _this5.increment(1, false);\n    };\n\n    this.onClickPrev = function () {\n        _this5.decrement(1, false);\n    };\n\n    this.onSwipeForward = function () {\n        _this5.increment(1, true);\n    };\n\n    this.onSwipeBackwards = function () {\n        _this5.decrement(1, true);\n    };\n\n    this.changeItem = function (e) {\n        if (!e.key || e.key === 'Enter') {\n            var newIndex = e.target.value;\n\n            _this5.selectItem({\n                selectedItem: newIndex\n            });\n        }\n    };\n\n    this.selectItem = function (state, cb) {\n        _this5.setState(state, cb);\n        _this5.handleOnChange(state.selectedItem, _react.Children.toArray(_this5.props.children)[state.selectedItem]);\n    };\n\n    this.getInitialImage = function () {\n        var selectedItem = _this5.props.selectedItem;\n        var item = _this5.itemsRef && _this5.itemsRef[selectedItem];\n        var images = item && item.getElementsByTagName('img');\n        return images && images[selectedItem];\n    };\n\n    this.getVariableImageHeight = function (position) {\n        var item = _this5.itemsRef && _this5.itemsRef[position];\n        var images = item && item.getElementsByTagName('img');\n        if (_this5.state.hasMount && images.length > 0) {\n            var image = images[0];\n\n            if (!image.complete) {\n                // if the image is still loading, the size won't be available so we trigger a new render after it's done\n                var onImageLoad = function onImageLoad() {\n                    _this5.forceUpdate();\n                    image.removeEventListener('load', onImageLoad);\n                };\n\n                image.addEventListener('load', onImageLoad);\n            }\n\n            var height = image.clientHeight;\n            return height > 0 ? height : null;\n        }\n\n        return null;\n    };\n};\n\nexports.default = Carousel;"]},"metadata":{},"sourceType":"script"}